> **k8s** или же **Kubernetes** - это **орекстратор контейнеров**, т.е. он умеет проверять их состояние, загруженность, перезапускать по необходимости и т.п.
> Также умеет в балансировку нагрузки, автоматическую репликацию и мониторинг, что, по факту, практически все основные вопросы касательно поддержки системы.
# Architecture

![](image-storage/Pasted%20image%2020250506190935.png)
## Cluster
> Вот всё описанное выше содержится в кластере, т.е. он содержит Control plane и Node'ы

### Control Plane
> Менеджер узлов (nodes)
#### API Server
> Отвечает за:
> - взаимодействие между компонентами кластера, 
> - валидацию запросов
> - аутентификацию и авторизацию запросов
> - предоставляет API для взаимодействия с ним (вроде он прям REST)
#### Controller Manager
> Набор контроллеров и менеджера для них. Где каждый контроллер отвечает за состояние Node'ы.
* Replication Controller (был до какой-то версии) - следил за соответствием репликаций факточескому числу POD'ов
* Node Controller - общий мониторинг node'ы, если node отвалилась, то помечает соответственно
* Endpoints Controller - помечает доступные сервисы и записывает их в список endpoint'ов
* Service Account Controller - отвечает за безопасности node'ы при обращение к ней с какого-либо токена
* Deployment Controller - управляет обновлением, умеет откатывать приложение до предыдущей версии
#### Scheduler
> Планировщик, распределяющий Pod'ы по Node'ам, отталкиваясь от конфигурации и доступных ресурсов
#### etcd
> key-value БД с информацией о всех конфигурациях и метаданных кластера
* Из всего Control Plane обращение к etcd может производить только API Server

## Node
> Некоторая виртуальная машина, содержащая 1 или более POD
### namespace
> Абстрактная группировка ресурсов по уникольному имени
![](image-storage/azure-kubernetes-service-namespaces-2.png)
### Pod
> Минимальная единица развёртывания, содержащая 1 или более контейнеров (как пример как раз Docker контейнеры)
* Содержит также общие для контейнеров файлы и сеть
* Содержит спецификацию для запуска контейнеров
### Container runtime
> Компонент, отвечающий за создание, управление и удаление контейнеров в node'е
### kubelet
> Агент node'ы, отвечающий за общение с Control Plane (через его же API), отслеживающий состояние текущей node'ы. 
> Умеет перезапускать контейнеры. 
### kube-proxy
> Сетевой прокси, отвечающий за общение Pod'ов и других компонентов в Node'е.
> Имеет функцию балансировки.