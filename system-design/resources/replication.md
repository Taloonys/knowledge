> **Репликация** - создание нового инстанса с копией всех данных первоначального сервиса/БД (если надо)
* Разные БД, очевидно, по-разному это делают под капотом, в **PostgreSQL**, например, есть такие понятия как **потоковая репликация** и **логическая**
# Models
* Многие детали ниже СУБД вполне себе умеют делать сами, об этом не стоит задумываться, достаточно указать модель репликации
* Обычно над **replicaSet** (набор реплик) есть какой-то управляющий узел, сервису достаточно отправлять все запросы на этот "роутер"
## master-slave
> Создаётся "БД-раб", в который записываются данные из master. 
> Если мастер упадёт, то данные будут актуальны и "живы" на слейве.
* Повышает производительность запросов
* Высокая доступность данных
### Read replica
> Запись в БД = Запись в master
> Чтение из БД = Чтение из slave
> * все записи данных в master также должны появиться и в slave *

![Pasted image 20241027140613](image-storage/Pasted%20image%2020241027140613.png)
**Но есть проблема**, что иногда нужно учитывать задержку синхронизации данных между master и slave. Для этого можно:
* Учитывать эту задержку при считывании
* Использовать методы БД, позволяющие проверить актуальность данных на slave
* Запросы типа "чтение, а потом запись" оптравлять сразу в master
## multi master
> Существуют несколько инстансов БД, данные между ними синхронизируются

![Pasted image 20241027140701](image-storage/Pasted%20image%2020241027140701.png)
* Упал один - заменит другой узел
* Все узлы разом упасть почти не могут
* Обновлять можно отдельные узлы, согласование прозойдёт уже потом
* Потенциальные задержки в данных
# Target criteria
**Раздумывать над использованием, если:**
* Потеря данных критична
* Высокая нагрузка на чтение
* Геораспределённость контента
* Важна непрерывность работы даже при сбоях
# Problems
* Консистентность данных
* Огромное потребление ресурсов (памяти)
* Сложность управления состояниями и мониторингом каждой реплики (если их много)
# example
* https://github.com/Taloonys/distributing-db-research/tree/dev -> `mongo-sharding-repl`