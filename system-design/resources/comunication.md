* [Web общение](../../network/resources/web-communication.md)
# Синхронные
> Отправка запроса, ожидание ответа...
> ! Когда нужна консистентность данных 
> - REST
> - gRPC / RPC
* Простая реализация
* Ожидаемое время отклика
* Удобство мониторинга и отладки
* Медленные ответы - большая задержка
* Проблемные места с масштабированием
* Сервисы сообщениями жёстко связываются
## Tech
* **gRPC** - Протобафы, HTTP/2, интеграция с TLS, широкая интероперабельность
* **Apache Thrift** - поддерживает множество протоколов, разработан Facebook
* **Apache Avro** - содержит json схемы и бинарный формат для быстрой сериализации сообщений, поэтому высокая скорость + малые пакеты
* **ZeroC ICA** - *что-то на буржуйском*
* **JSON-RPC** - из-за json медленнее других, нет правил безопасности...
# Асинхронные
> Отправка запроса, делаем свои дела, когда-нибудь да получим ответ...
> ! Когда нужна масштабируемость, повышенная отказоустойчивость
* Легко масштабировать
* Устойчивость к сбоем
* Сервисы независимы друг от друга
* Сложно сделать
* Острый вопрос несогласованности данных
* Доп. траты инфраструктуры
## Модели использования
### Message queueing
> Сообщения от сервисов кладутся в очередь, получатели вытаскивают их по мере готовности/необходимости.
> Т.е. используется **Pull-подход**.
### Event Sourcing
> Все события журналируются, состояние системы можно будет восстановить по этим событиям.
> Т.е. используется **Push-подход**.
### Publish/Subscribe
> Сообщения отправляются в топики, из топиков эти сообщения рассылаются всем соответствующим на него подписчикам
> Т.е. используется **Push-подход**.
## Patterns
* **Message queueing**
* **Event Sourcing**
* **Publish/Subscribe**
* **Choreography** - какой-нибудь сервис получает событие, на него генерирует своё событие и отправляет обратно в брокер сообщений
* **Orchestration** - какой-нибудь сервис получает событие, общается со своей пачкой сервисов, по итогу генерирует событие и отдаёт его в брокер сообщений
## Tech
* Любая событийно ориентированная технология - **Event Driven Architecture (EDA)**
* Брокеры сообщений
	* **RabbitMQ** - открытый, свой протокол AMQP, умеет в кластеризацию и хорошую маршрутизацию
		* RabbitMQ vs Kafka -> https://habr.com/ru/companies/itsumma/articles/416629/
	* [Apache Kafka](kafka.md) - открытый, высокая скорость
	* **Amazon SQS** - сервис от AWS, умеет в распределённые системы и бессерверные приложения 